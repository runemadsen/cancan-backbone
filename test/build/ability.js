(function() {
  (function(Backbone) {
    var Comment, Post;
    Post = Backbone.Model.extend({
      defaults: {
        title: "Hello!",
        body: "This is a blog post!"
      }
    }, {
      backboneClass: "Post"
    });
    Comment = Backbone.Model.extend({
      defaults: {
        body: "This is a comment!"
      }
    }, {
      backboneClass: "Comment"
    });
    test("should work when passing in existing object with rules and subjects", function() {
      var a, existing;
      existing = {
        rules: [
          {
            base_behavior: true,
            subjects: ["Post"],
            actions: ["index", "show"],
            conditions: {
              id: 1
            }
          }, {
            base_behavior: true,
            subjects: ["Comment"],
            actions: ["index", "show", "new", "create"],
            conditions: {
              post_id: 1
            }
          }
        ]
      };
      a = new Ability(existing);
      ok(a.can("index", Post));
      ok(a.can("index", new Post({
        id: 1
      })));
      ok(a.cannot("index", new Post({
        id: 2
      })));
      ok(a.cannot("destroy", Post));
      ok(a.can("new", Comment));
      ok(a.can("new", new Comment({
        post_id: 1
      })));
      ok(a.cannot("new", new Comment({
        post_id: 2
      })));
    });
    test("should work on backbone model", function() {
      var a;
      a = new Ability();
      a.set_can("read", Post);
      ok(a.can("read", Post));
    });
    test("should work on backbone model name as string", function() {
      var a;
      a = new Ability();
      a.set_can("read", Post);
      ok(a.can("read", "Post"));
    });
    test("should work on backbone model name as string the other way around", function() {
      var a;
      a = new Ability();
      a.set_can("read", "Post");
      ok(a.can("read", Post));
    });
    test("should be able to 'read' anything", function() {
      var a;
      a = new Ability();
      a.set_can("read", "all");
      ok(a.can("read", String));
      ok(a.can("read", 123));
    });
    test("should not have permission to do something it doesn't know about", function() {
      var a;
      a = new Ability();
      ok(a.cannot("foodfight", String));
    });
    test("should alias update or destroy actions to modify action", function() {
      var a;
      a = new Ability();
      a.alias_action(["update", "destroy"], "modify");
      a.set_can("modify", "all");
      ok(a.can("update", 123));
      ok(a.can("destroy", 123));
    });
    test("should allow deeply nested aliased actions", function() {
      var a;
      a = new Ability();
      a.alias_action(["increment"], "sort");
      a.alias_action(["sort"], "modify");
      a.set_can("modify", "all");
      ok(a.can("increment", 123));
    });
    test("should raise an Error if alias target is an exist action", function() {
      var a;
      a = new Ability();
      throws((function() {
        a.alias_action(["show"], "show");
      }), "You can't specify target (show) as alias because it is real action name");
    });
    test("should automatically alias index and show into read calls", function() {
      var a;
      a = new Ability();
      a.set_can("read", "all");
      ok(a.can("index", 123));
      ok(a.can("show", 123));
    });
    test("should automatically alias new and edit into create and update respectively", function() {
      var a;
      a = new Ability();
      a.set_can("create", "all");
      a.set_can("update", "all");
      ok(a.can("new", 123));
      ok(a.can("edit", 123));
    });
    test("should offer cannot? method which is simply invert of can?", function() {
      var a;
      a = new Ability();
      ok(a.cannot("tie", String));
    });
    test("should be able to specify multiple actions and match any", function() {
      var a;
      a = new Ability();
      a.set_can(["read", "update"], "all");
      ok(a.can("read", 123));
      ok(a.can("update", 123));
      ok(a.cannot("count", 123));
    });
    test("should be able to specify multiple classes and match any instances", function() {
      var a;
      a = new Ability();
      a.set_can("update", [Post, Comment]);
      ok(a.can("update", new Post()));
      ok(a.can("update", new Comment()));
      ok(a.cannot("update", new RegExp()));
    });
    test("should be able to specify multiple classes and match any classes", function() {
      var a;
      a = new Ability();
      a.set_can("update", [Post, Comment]);
      ok(a.can("update", Post));
      ok(a.can("update", Comment));
      ok(a.cannot("update", RegExp));
    });
    test("should support custom objects in the rule", function() {
      var a;
      a = new Ability();
      a.set_can("read", "stats");
      ok(a.can("read", "stats"));
      ok(a.cannot("update", "stats"));
      ok(a.cannot("read", "nonstats"));
    });
    test("should support 'cannot' method to define what user cannot do", function() {
      var a;
      a = new Ability();
      a.set_can("read", "all");
      a.set_cannot("read", Post);
      ok(a.can("read", "foo"));
      ok(a.cannot("read", new Post()));
    });
    test("should append aliased actions", function() {
      var a;
      a = new Ability();
      a.alias_action(["update"], "modify");
      a.alias_action(["destroy"], "modify");
      ok(_.isEqual(["update", "destroy"], a.get("aliased_actions")["modify"]));
    });
    test("should clear aliased actions", function() {
      var a;
      a = new Ability();
      a.alias_action(["update"], "modify");
      a.clear_aliased_actions();
      equal(undefined, a.get("aliased_actions")["modify"]);
    });
    test("should use conditions as third parameter and determine abilities from it", function() {
      var a;
      a = new Ability();
      a.set_can("read", Post, {
        title: "Hello"
      });
      ok(a.can("read", new Post({
        title: "Hello"
      })));
      ok(a.cannot("read", new Post({
        title: "Goodbye"
      })));
      ok(a.can("read", Post));
    });
    test("should allow an array of options in conditions hash", function() {
      var a;
      a = new Ability();
      a.set_can("read", Post, {
        tags: ["awesome", "cool", "pretty"]
      });
      ok(a.can("read", new Post({
        tags: ["awesome", "cool", "pretty"]
      })));
      ok(a.cannot("read", new Post({
        tags: ["ugly", "bad"]
      })));
      ok(a.can("read", Post));
    });
    test("should allow nested hashes in conditions hash", function() {
      var a;
      a = new Ability();
      a.set_can("read", Post, {
        comment: {
          user_id: 1
        }
      });
      ok(a.can("read", new Post({
        comment: {
          user_id: 1
        }
      })));
      ok(a.cannot("read", new Post({
        comment: {
          user_id: 2
        }
      })));
    });
    test("should allow false values conditions hash", function() {
      var a;
      a = new Ability();
      a.set_can("read", Post, {
        comment: {
          is_protected: false
        }
      });
      ok(a.can("read", new Post({
        comment: {
          is_protected: false
        }
      })));
      ok(a.cannot("read", new Post({
        comment: {
          is_protected: true
        }
      })));
    });
    test("should not stop at cannot definition when comparing class", function() {
      var a;
      a = new Ability();
      a.set_can("read", Post);
      a.set_cannot("read", Post, {
        id: 1
      });
      ok(a.can("read", new Post({
        id: 2
      })));
      ok(a.cannot("read", new Post({
        id: 1
      })));
      ok(a.can("read", Post));
    });
    return test("should stop at cannot definition when no hash is present", function() {
      var a;
      a = new Ability();
      a.set_can("read", "all");
      a.set_cannot("read", Post);
      ok(a.cannot("read", new Post()));
      ok(a.cannot("read", Post));
    });
  })(Backbone);

}).call(this);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYWJpbGl0eS5qcyIsInNvdXJjZXMiOlsiYWJpbGl0eS5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQSxFQUFHLENBQUEsU0FBQyxRQUFELEdBQUE7QUFDRCxRQUFBLGFBQUE7QUFBQSxJQUFBLElBQUEsR0FBTyxRQUFRLENBQUMsS0FBSyxDQUFDLE1BQWYsQ0FDTDtBQUFBLE1BQUEsUUFBQSxFQUNFO0FBQUEsUUFBQSxLQUFBLEVBQU8sUUFBUDtBQUFBLFFBQ0EsSUFBQSxFQUFNLHNCQUROO09BREY7S0FESyxFQUtMO0FBQUEsTUFBQSxhQUFBLEVBQWUsTUFBZjtLQUxLLENBQVAsQ0FBQTtBQUFBLElBT0EsT0FBQSxHQUFVLFFBQVEsQ0FBQyxLQUFLLENBQUMsTUFBZixDQUNSO0FBQUEsTUFBQSxRQUFBLEVBQ0U7QUFBQSxRQUFBLElBQUEsRUFBTSxvQkFBTjtPQURGO0tBRFEsRUFJUjtBQUFBLE1BQUEsYUFBQSxFQUFlLFNBQWY7S0FKUSxDQVBWLENBQUE7QUFBQSxJQWFBLElBQUEsQ0FBSyxxRUFBTCxFQUE0RSxTQUFBLEdBQUE7QUFDMUUsVUFBQSxXQUFBO0FBQUEsTUFBQSxRQUFBLEdBQVc7QUFBQSxRQUFBLEtBQUEsRUFBTztVQUNoQjtBQUFBLFlBQ0UsYUFBQSxFQUFlLElBRGpCO0FBQUEsWUFFRSxRQUFBLEVBQVUsQ0FBQyxNQUFELENBRlo7QUFBQSxZQUdFLE9BQUEsRUFBUyxDQUNQLE9BRE8sRUFFUCxNQUZPLENBSFg7QUFBQSxZQU9FLFVBQUEsRUFDRTtBQUFBLGNBQUEsRUFBQSxFQUFJLENBQUo7YUFSSjtXQURnQixFQVdoQjtBQUFBLFlBQ0UsYUFBQSxFQUFlLElBRGpCO0FBQUEsWUFFRSxRQUFBLEVBQVUsQ0FBQyxTQUFELENBRlo7QUFBQSxZQUdFLE9BQUEsRUFBUyxDQUNQLE9BRE8sRUFFUCxNQUZPLEVBR1AsS0FITyxFQUlQLFFBSk8sQ0FIWDtBQUFBLFlBU0UsVUFBQSxFQUNFO0FBQUEsY0FBQSxPQUFBLEVBQVMs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QUFTLE1BQVQsRUFBcUIsSUFBQSxJQUFBLENBQUEsQ0FBckIsQ0FBSCxDQUhBLENBQUE7QUFBQSxNQUlBLEVBQUEsQ0FBRyxDQUFDLENBQUMsTUFBRixDQUFTLE1BQVQsRUFBaUIsSUFBakIsQ0FBSCxDQUpBLENBRCtEO0lBQUEsQ0FBakUsRUF0UUM7RUFBQSxDQUFBLENBQUgsQ0FBSSxRQUFKLENBQUEsQ0FBQTtBQUFBIiwic291cmNlc0NvbnRlbnQiOlsiZG8gKEJhY2tib25lKSAtPlxuICBQb3N0ID0gQmFja2JvbmUuTW9kZWwuZXh0ZW5kKFxuICAgIGRlZmF1bHRzOlxuICAgICAgdGl0bGU6IFwiSGVsbG8hXCJcbiAgICAgIGJvZHk6IFwiVGhpcyBpcyBhIGJsb2cgcG9zdCFcIlxuICAsXG4gICAgYmFja2JvbmVDbGFzczogXCJQb3N0XCJcbiAgKVxuICBDb21tZW50ID0gQmFja2JvbmUuTW9kZWwuZXh0ZW5kKFxuICAgIGRlZmF1bHRzOlxuICAgICAgYm9keTogXCJUaGlzIGlzIGEgY29tbWVudCFcIlxuICAsXG4gICAgYmFja2JvbmVDbGFzczogXCJDb21tZW50XCJcbiAgKVxuICB0ZXN0IFwic2hvdWxkIHdvcmsgd2hlbiBwYXNzaW5nIGluIGV4aXN0aW5nIG9iamVjdCB3aXRoIHJ1bGVzIGFuZCBzdWJqZWN0c1wiLCAtPlxuICAgIGV4aXN0aW5nID0gcnVsZXM6IFtcbiAgICAgIHtcbiAgICAgICAgYmFzZV9iZWhhdmlvcjogdHJ1ZVxuICAgICAgICBzdWJqZWN0czogW1wiUG9zdFwiXVxuICAgICAgICBhY3Rpb25zOiBbXG4gICAgICAgICAgXCJpbmRleFwiXG4gICAgICAgICAgXCJzaG93XCJcbiAgICAgICAgXVxuICAgICAgICBjb25kaXRpb25zOlxuICAgICAgICAgIGlkOiAxXG4gICAgICB9XG4gICAgICB7XG4gICAgICAgIGJhc2VfYmVoYXZpb3I6IHRydWVcbiAgICAgICAgc3ViamVjdHM6IFtcIkNvbW1lbnRcIl1cbiAgICAgICAgYWN0aW9uczogW1xuICAgICAgICAgIFwiaW5kZXhcIlxuICAgICAgICAgIFwic2hvd1wiXG4gICAgICAgICAgXCJuZXdcIlxuICAgICAgICAgIFwiY3JlYXRlXCJcbiAgICAgICAgXVxuICAgICAgICBjb25kaXRpb25zOlxuICAgICAgICAgIHBvc3RfaWQ6IDFcbiAgICAgIH1cbiAgICBdXG4gICAgYSA9IG5ldyBBYmlsaXR5KGV4aXN0aW5nKVxuICAgIG9rIGEuY2FuKFwiaW5kZXhcIiwgUG9zdClcbiAgICBvayBhLmNhbihcImluZGV4XCIsIG5ldyBQb3N0KGlkOiAxKSlcbiAgICBvayBhLmNhbm5vdChcImluZGV4XCIsIG5ldyBQb3N0KGlkOiAyKSlcbiAgICBvayBhLmNhbm5vdChcImRlc3Ryb3lcIiwgUG9zdClcbiAgICBvayBhLmNhbihcIm5ld1wiLCBDb21tZW50KVxuICAgIG9rIGEuY2FuKFwibmV3XCIsIG5ldyBDb21tZW50KHBvc3RfaWQ6IDEpKVxuICAgIG9rIGEuY2Fubm90KFwibmV3XCIsIG5ldyBDb21tZW50KHBvc3RfaWQ6IDIpKVxuICAgIHJldHVyblxuXG4gIHRlc3QgXCJzaG91bGQgd29yayBvbiBiYWNrYm9uZSBtb2RlbFwiLCAtPlxuICAgIGEgPSBuZXcgQWJpbGl0eSgpXG4gICAgYS5zZXRfY2FuIFwicmVhZFwiLCBQb3N0XG4gICAgb2sgYS5jYW4oXCJyZWFkXCIsIFBvc3QpXG4gICAgcmV0dXJuXG5cbiAgdGVzdCBcInNob3VsZCB3b3JrIG9uIGJhY2tib25lIG1vZGVsIG5hbWUgYXMgc3RyaW5nXCIsIC0+XG4gICAgYSA9IG5ldyBBYmlsaXR5KClcbiAgICBhLnNldF9jYW4gXCJyZWFkXCIsIFBvc3RcbiAgICBvayBhLmNhbihcInJlYWRcIiwgXCJQb3N0XCIpXG4gICAgcmV0dXJuXG5cbiAgdGVzdCBcInNob3VsZCB3b3JrIG9uIGJhY2tib25lIG1vZGVsIG5hbWUgYXMgc3RyaW5nIHRoZSBvdGhlciB3YXkgYXJvdW5kXCIsIC0+XG4gICAgYSA9IG5ldyBBYmlsaXR5KClcbiAgICBhLnNldF9jYW4gXCJyZWFkXCIsIFwiUG9zdFwiXG4gICAgb2sgYS5jYW4oXCJyZWFkXCIsIFBvc3QpXG4gICAgcmV0dXJuXG5cbiAgdGVzdCBcInNob3VsZCBiZSBhYmxlIHRvICdyZWFkJyBhbnl0aGluZ1wiLCAtPlxuICAgIGEgPSBuZXcgQWJpbGl0eSgpXG4gICAgYS5zZXRfY2FuIFwicmVhZFwiLCBcImFsbFwiXG4gICAgb2sgYS5jYW4oXCJyZWFkXCIsIFN0cmluZylcbiAgICBvayBhLmNhbihcInJlYWRcIiwgMTIzKVxuICAgIHJldHVyblxuXG4gIHRlc3QgXCJzaG91bGQgbm90IGhhdmUgcGVybWlzc2lvbiB0byBkbyBzb21ldGhpbmcgaXQgZG9lc24ndCBrbm93IGFib3V0XCIsIC0+XG4gICAgYSA9IG5ldyBBYmlsaXR5KClcbiAgICBvayBhLmNhbm5vdChcImZvb2RmaWdodFwiLCBTdHJpbmcpXG4gICAgcmV0dXJuXG5cbiAgdGVzdCBcInNob3VsZCBhbGlhcyB1cGRhdGUgb3IgZGVzdHJveSBhY3Rpb25zIHRvIG1vZGlmeSBhY3Rpb25cIiwgLT5cbiAgICBhID0gbmV3IEFiaWxpdHkoKVxuICAgIGEuYWxpYXNfYWN0aW9uIFtcbiAgICAgIFwidXBkYXRlXCJcbiAgICAgIFwiZGVzdHJveVwiXG4gICAgXSwgXCJtb2RpZnlcIlxuICAgIGEuc2V0X2NhbiBcIm1vZGlmeVwiLCBcImFsbFwiXG4gICAgb2sgYS5jYW4oXCJ1cGRhdGVcIiwgMTIzKVxuICAgIG9rIGEuY2FuKFwiZGVzdHJveVwiLCAxMjMpXG4gICAgcmV0dXJuXG5cbiAgdGVzdCBcInNob3VsZCBhbGxvdyBkZWVwbHkgbmVzdGVkIGFsaWFzZWQgYWN0aW9uc1wiLCAtPlxuICAgIGEgPSBuZXcgQWJpbGl0eSgpXG4gICAgYS5hbGlhc19hY3Rpb24gW1wiaW5jcmVtZW50XCJdLCBcInNvcnRcIlxuICAgIGEuYWxpYXNfYWN0aW9uIFtcInNvcnRcIl0sIFwibW9kaWZ5XCJcbiAgICBhLnNldF9jYW4gXCJtb2RpZnlcIiwgXCJhbGxcIlxuICAgIG9rIGEuY2FuKFwiaW5jcmVtZW50XCIsIDEyMylcbiAgICByZXR1cm5cblxuICB0ZXN0IFwic2hvdWxkIHJhaXNlIGFuIEVycm9yIGlmIGFsaWFzIHRhcmdldCBpcyBhbiBleGlzdCBhY3Rpb25cIiwgLT5cbiAgICBhID0gbmV3IEFiaWxpdHkoKVxuICAgIHRocm93cyAoLT5cbiAgICAgIGEuYWxpYXNfYWN0aW9uIFtcInNob3dcIl0sIFwic2hvd1wiXG4gICAgICByZXR1cm5cbiAgICApLCBcIllvdSBjYW4ndCBzcGVjaWZ5IHRhcmdldCAoc2hvdykgYXMgYWxpYXMgYmVjYXVzZSBpdCBpcyByZWFsIGFjdGlvbiBuYW1lXCJcbiAgICByZXR1cm5cblxuICB0ZXN0IFwic2hvdWxkIGF1dG9tYXRpY2FsbHkgYWxpYXMgaW5kZXggYW5kIHNob3cgaW50byByZWFkIGNhbGxzXCIsIC0+XG4gICAgYSA9IG5ldyBBYmlsaXR5KClcbiAgICBhLnNldF9jYW4gXCJyZWFkXCIsIFwiYWxsXCJcbiAgICBvayBhLmNhbihcImluZGV4XCIsIDEyMylcbiAgICBvayBhLmNhbihcInNob3dcIiwgMTIzKVxuICAgIHJldHVyblxuXG4gIHRlc3QgXCJzaG91bGQgYXV0b21hdGljYWxseSBhbGlhcyBuZXcgYW5kIGVkaXQgaW50byBjcmVhdGUgYW5kIHVwZGF0ZSByZXNwZWN0aXZlbHlcIiwgLT5cbiAgICBhID0gbmV3IEFiaWxpdHkoKVxuICAgIGEuc2V0X2NhbiBcImNyZWF0ZVwiLCBcImFsbFwiXG4gICAgYS5zZXRfY2FuIFwidXBkYXRlXCIsIFwiYWxsXCJcbiAgICBvayBhLmNhbihcIm5ld1wiLCAxMjMpXG4gICAgb2sgYS5jYW4oXCJlZGl0XCIsIDEyMylcbiAgICByZXR1cm5cblxuICB0ZXN0IFwic2hvdWxkIG9mZmVyIGNhbm5vdD8gbWV0aG9kIHdoaWNoIGlzIHNpbXBseSBpbnZlcnQgb2YgY2FuP1wiLCAtPlxuICAgIGEgPSBuZXcgQWJpbGl0eSgpXG4gICAgb2sgYS5jYW5ub3QoXCJ0aWVcIiwgU3RyaW5nKVxuICAgIHJldHVyblxuXG4gIHRlc3QgXCJzaG91bGQgYmUgYWJsZSB0byBzcGVjaWZ5IG11bHRpcGxlIGFjdGlvbnMgYW5kIG1hdGNoIGFueVwiLCAtPlxuICAgIGEgPSBuZXcgQWJpbGl0eSgpXG4gICAgYS5zZXRfY2FuIFtcbiAgICAgIFwicmVhZFwiXG4gICAgICBcInVwZGF0ZVwiXG4gICAgXSwgXCJhbGxcIlxuICAgIG9rIGEuY2FuKFwicmVhZFwiLCAxMjMpXG4gICAgb2sgYS5jYW4oXCJ1cGRhdGVcIiwgMTIzKVxuICAgIG9rIGEuY2Fubm90KFwiY291bnRcIiwgMTIzKVxuICAgIHJldHVyblxuXG4gIHRlc3QgXCJzaG91bGQgYmUgYWJsZSB0byBzcGVjaWZ5IG11bHRpcGxlIGNsYXNzZXMgYW5kIG1hdGNoIGFueSBpbnN0YW5jZXNcIiwgLT5cbiAgICBhID0gbmV3IEFiaWxpdHkoKVxuICAgIGEuc2V0X2NhbiBcInVwZGF0ZVwiLCBbXG4gICAgICBQb3N0XG4gICAgICBDb21tZW50XG4gICAgXVxuICAgIG9rIGEuY2FuKFwidXBkYXRlXCIsIG5ldyBQb3N0KCkpXG4gICAgb2sgYS5jYW4oXCJ1cGRhdGVcIiwgbmV3IENvbW1lbnQoKSlcbiAgICBvayBhLmNhbm5vdChcInVwZGF0ZVwiLCBuZXcgUmVnRXhwKCkpXG4gICAgcmV0dXJuXG5cbiAgdGVzdCBcInNob3VsZCBiZSBhYmxlIHRvIHNwZWNpZnkgbXVsdGlwbGUgY2xhc3NlcyBhbmQgbWF0Y2ggYW55IGNsYXNzZXNcIiwgLT5cbiAgICBhID0gbmV3IEFiaWxpdHkoKVxuICAgIGEuc2V0X2NhbiBcInVwZGF0ZVwiLCBbXG4gICAgICBQb3N0XG4gICAgICBDb21tZW50XG4gICAgXVxuICAgIG9rIGEuY2FuKFwidXBkYXRlXCIsIFBvc3QpXG4gICAgb2sgYS5jYW4oXCJ1cGRhdGVcIiwgQ29tbWVudClcbiAgICBvayBhLmNhbm5vdChcInVwZGF0ZVwiLCBSZWdFeHApXG4gICAgcmV0dXJuXG5cbiAgdGVzdCBcInNob3VsZCBzdXBwb3J0IGN1c3RvbSBvYmplY3RzIGluIHRoZSBydWxlXCIsIC0+XG4gICAgYSA9IG5ldyBBYmlsaXR5KClcbiAgICBhLnNldF9jYW4gXCJyZWFkXCIsIFwic3RhdHNcIlxuICAgIG9rIGEuY2FuKFwicmVhZFwiLCBcInN0YXRzXCIpXG4gICAgb2sgYS5jYW5ub3QoXCJ1cGRhdGVcIiwgXCJzdGF0c1wiKVxuICAgIG9rIGEuY2Fubm90KFwicmVhZFwiLCBcIm5vbnN0YXRzXCIpXG4gICAgcmV0dXJuXG5cbiAgdGVzdCBcInNob3VsZCBzdXBwb3J0ICdjYW5ub3QnIG1ldGhvZCB0byBkZWZpbmUgd2hhdCB1c2VyIGNhbm5vdCBkb1wiLCAtPlxuICAgIGEgPSBuZXcgQWJpbGl0eSgpXG4gICAgYS5zZXRfY2FuIFwicmVhZFwiLCBcImFsbFwiXG4gICAgYS5zZXRfY2Fubm90IFwicmVhZFwiLCBQb3N0XG4gICAgb2sgYS5jYW4oXCJyZWFkXCIsIFwiZm9vXCIpXG4gICAgb2sgYS5jYW5ub3QoXCJyZWFkXCIsIG5ldyBQb3N0KCkpXG4gICAgcmV0dXJuXG5cbiAgdGVzdCBcInNob3VsZCBhcHBlbmQgYWxpYXNlZCBhY3Rpb25zXCIsIC0+XG4gICAgYSA9IG5ldyBBYmlsaXR5KClcbiAgICBhLmFsaWFzX2FjdGlvbiBbXCJ1cGRhdGVcIl0sIFwibW9kaWZ5XCJcbiAgICBhLmFsaWFzX2FjdGlvbiBbXCJkZXN0cm95XCJdLCBcIm1vZGlmeVwiXG4gICAgb2sgXy5pc0VxdWFsKFtcbiAgICAgIFwidXBkYXRlXCJcbiAgICAgIFwiZGVzdHJveVwiXG4gICAgXSwgYS5nZXQoXCJhbGlhc2VkX2FjdGlvbnNcIilbXCJtb2RpZnlcIl0pXG4gICAgcmV0dXJuXG5cbiAgdGVzdCBcInNob3VsZCBjbGVhciBhbGlhc2VkIGFjdGlvbnNcIiwgLT5cbiAgICBhID0gbmV3IEFiaWxpdHkoKVxuICAgIGEuYWxpYXNfYWN0aW9uIFtcInVwZGF0ZVwiXSwgXCJtb2RpZnlcIlxuICAgIGEuY2xlYXJfYWxpYXNlZF9hY3Rpb25zKClcbiAgICBlcXVhbCBgdW5kZWZpbmVkYCwgYS5nZXQoXCJhbGlhc2VkX2FjdGlvbnNcIilbXCJtb2RpZnlcIl1cbiAgICByZXR1cm5cblxuICB0ZXN0IFwic2hvdWxkIHVzZSBjb25kaXRpb25zIGFzIHRoaXJkIHBhcmFtZXRlciBhbmQgZGV0ZXJtaW5lIGFiaWxpdGllcyBmcm9tIGl0XCIsIC0+XG4gICAgYSA9IG5ldyBBYmlsaXR5KClcbiAgICBhLnNldF9jYW4gXCJyZWFkXCIsIFBvc3QsXG4gICAgICB0aXRsZTogXCJIZWxsb1wiXG5cbiAgICBvayBhLmNhbihcInJlYWRcIiwgbmV3IFBvc3QodGl0bGU6IFwiSGVsbG9cIikpXG4gICAgb2sgYS5jYW5ub3QoXCJyZWFkXCIsIG5ldyBQb3N0KHRpdGxlOiBcIkdvb2RieWVcIikpXG4gICAgb2sgYS5jYW4oXCJyZWFkXCIsIFBvc3QpXG4gICAgcmV0dXJuXG5cbiAgdGVzdCBcInNob3VsZCBhbGxvdyBhbiBhcnJheSBvZiBvcHRpb25zIGluIGNvbmRpdGlvbnMgaGFzaFwiLCAtPlxuICAgIGEgPSBuZXcgQWJpbGl0eSgpXG4gICAgYS5zZXRfY2FuIFwicmVhZFwiLCBQb3N0LFxuICAgICAgdGFnczogW1xuICAgICAgICBcImF3ZXNvbWVcIlxuICAgICAgICBcImNvb2xcIlxuICAgICAgICBcInByZXR0eVwiXG4gICAgICBdXG5cbiAgICBvayBhLmNhbihcInJlYWRcIiwgbmV3IFBvc3QodGFnczogW1xuICAgICAgXCJhd2Vzb21lXCJcbiAgICAgIFwiY29vbFwiXG4gICAgICBcInByZXR0eVwiXG4gICAgXSkpXG4gICAgb2sgYS5jYW5ub3QoXCJyZWFkXCIsIG5ldyBQb3N0KHRhZ3M6IFtcbiAgICAgIFwidWdseVwiXG4gICAgICBcImJhZFwiXG4gICAgXSkpXG4gICAgb2sgYS5jYW4oXCJyZWFkXCIsIFBvc3QpXG4gICAgcmV0dXJuXG5cbiAgdGVzdCBcInNob3VsZCBhbGxvdyBuZXN0ZWQgaGFzaGVzIGluIGNvbmRpdGlvbnMgaGFzaFwiLCAtPlxuICAgIGEgPSBuZXcgQWJpbGl0eSgpXG4gICAgYS5zZXRfY2FuIFwicmVhZFwiLCBQb3N0LFxuICAgICAgY29tbWVudDpcbiAgICAgICAgdXNlcl9pZDogMVxuXG4gICAgb2sgYS5jYW4oXCJyZWFkXCIsIG5ldyBQb3N0KGNvbW1lbnQ6XG4gICAgICB1c2VyX2lkOiAxXG4gICAgKSlcbiAgICBvayBhLmNhbm5vdChcInJlYWRcIiwgbmV3IFBvc3QoY29tbWVudDpcbiAgICAgIHVzZXJfaWQ6IDJcbiAgICApKVxuICAgIHJldHVyblxuXG4gIHRlc3QgXCJzaG91bGQgYWxsb3cgZmFsc2UgdmFsdWVzIGNvbmRpdGlvbnMgaGFzaFwiLCAtPlxuICAgIGEgPSBuZXcgQWJpbGl0eSgpXG4gICAgYS5zZXRfY2FuIFwicmVhZFwiLCBQb3N0LFxuICAgICAgY29tbWVudDpcbiAgICAgICAgaXNfcHJvdGVjdGVkOiBmYWxzZVxuXG4gICAgb2sgYS5jYW4oXCJyZWFkXCIsIG5ldyBQb3N0KGNvbW1lbnQ6XG4gICAgICBpc19wcm90ZWN0ZWQ6IGZhbHNlXG4gICAgKSlcbiAgICBvayBhLmNhbm5vdChcInJlYWRcIiwgbmV3IFBvc3QoY29tbWVudDpcbiAgICAgIGlzX3Byb3RlY3RlZDogdHJ1ZVxuICAgICkpXG4gICAgcmV0dXJuXG5cbiAgdGVzdCBcInNob3VsZCBub3Qgc3RvcCBhdCBjYW5ub3QgZGVmaW5pdGlvbiB3aGVuIGNvbXBhcmluZyBjbGFzc1wiLCAtPlxuICAgIGEgPSBuZXcgQWJpbGl0eSgpXG4gICAgYS5zZXRfY2FuIFwicmVhZFwiLCBQb3N0XG4gICAgYS5zZXRfY2Fubm90IFwicmVhZFwiLCBQb3N0LFxuICAgICAgaWQ6IDFcblxuICAgIG9rIGEuY2FuKFwicmVhZFwiLCBuZXcgUG9zdChpZDogMikpXG4gICAgb2sgYS5jYW5ub3QoXCJyZWFkXCIsIG5ldyBQb3N0KGlkOiAxKSlcbiAgICBvayBhLmNhbihcInJlYWRcIiwgUG9zdClcbiAgICByZXR1cm5cblxuICB0ZXN0IFwic2hvdWxkIHN0b3AgYXQgY2Fubm90IGRlZmluaXRpb24gd2hlbiBubyBoYXNoIGlzIHByZXNlbnRcIiwgLT5cbiAgICBhID0gbmV3IEFiaWxpdHkoKVxuICAgIGEuc2V0X2NhbiBcInJlYWRcIiwgXCJhbGxcIlxuICAgIGEuc2V0X2Nhbm5vdCBcInJlYWRcIiwgUG9zdFxuICAgIG9rIGEuY2Fubm90KFwicmVhZFwiLCBuZXcgUG9zdCgpKVxuICAgIG9rIGEuY2Fubm90KFwicmVhZFwiLCBQb3N0KVxuICAgIHJldHVyblxuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9